<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Framable HTML</title>
</head>
<body>
    <h1>Assignment 4</h1>
    <h2>Is this public site framable?</h2>
    <br>
    <script>
        const body_parser=require('body-parser');
    
        app.use(body_parser.urlencoded({extended: false}));
        app.use(body_parser.json());

        function stateChange() {
            setTimeout(function () {
            
                const iframe = document.getElementById('myiframe');
                //const isLoaded = iframe.childElementCount;
                const isLoaded = iframe.contentWindow.window.length;
                
                if (isLoaded == 0) {
                    alert("Iframe loaded");
                    alert(iframe.innerText);
                    alert(isLoaded);
                }else{
                    alert("Iframe NOT loaded");
                    alert(iframe);
                    alert(isLoaded);
                }
            }, 2000);
        }  
    </script>
    <iframe onload="stateChange()" onerror="onerror()" id="myiframe" src="https://spotify.com" frameborder="0" width="600" height="400"></iframe>
</body>
</html>
